# ðŸš€ Version 0.1.0: Detailed Task Breakdown

## Overview

**Goal**: Get the fundamental loop working with powerful dev tools
**Timeline**: 2-3 weeks
**Target**: Working, playable idle farming game

## Task 1: Single Plot Planting System

**Epic**: Implement the fundamental planting mechanic

### Subtask 1.1: Create Plot Data Structure

**Effort**: Small (2-4 hours)
**Dependencies**: None

**Description**: Define the data structure for a single plot

**Acceptance Criteria**:

- [ ] PlotState interface defined in TypeScript
- [ ] Plot can be empty, planted, growing, or ready
- [ ] Plot stores position (x, y coordinates)
- [ ] Plot can store crop information
- [ ] Plot can store planting timestamp

**Technical Requirements**:

```typescript
interface PlotState {
	id: string;
	position: { x: number; y: number };
	crop?: CropState;
	status: "empty" | "planted" | "growing" | "ready";
	plantedAt?: number;
	growthTime?: number;
}
```

---

### Subtask 1.2: Create Plot Visual Component

**Effort**: Medium (4-8 hours)
**Dependencies**: Subtask 1.1

**Description**: Create a Pixi.js visual component for a single plot

**Acceptance Criteria**:

- [ ] Plot renders as a clickable rectangle
- [ ] Plot changes color based on status (empty, planted, growing, ready)
- [ ] Plot shows visual feedback when clicked
- [ ] Plot is 64x64 pixels
- [ ] Plot has hover effects

**Technical Requirements**:

- Pixi.js Graphics or Sprite
- Click event handling
- Visual state management
- Hover effects

---

### Subtask 1.3: Implement Plot Click Handling

**Effort**: Small (2-4 hours)
**Dependencies**: Subtask 1.2

**Description**: Handle click events on the plot

**Acceptance Criteria**:

- [ ] Click event is captured on plot
- [ ] Click shows visual feedback (highlight, scale, etc.)
- [ ] Click triggers appropriate action based on plot status
- [ ] Click handling is responsive (<100ms)

**Technical Requirements**:

- Pixi.js event handling
- Visual feedback system
- Action routing based on plot status

---

### Subtask 1.4: Create Seed Selection Interface

**Effort**: Medium (4-8 hours)
**Dependencies**: Subtask 1.3

**Description**: Create interface for selecting seeds to plant

**Acceptance Criteria**:

- [ ] Seed selection modal/panel appears on plot click
- [ ] Shows available seeds with names and prices
- [ ] Player can select a seed
- [ ] Selection is confirmed with button click
- [ ] Modal closes after selection

**Technical Requirements**:

- Modal/panel UI component
- Seed data display
- Selection confirmation
- Modal state management

---

### Subtask 1.5: Implement Planting Logic

**Effort**: Small (2-4 hours)
**Dependencies**: Subtask 1.4

**Description**: Implement the actual planting logic

**Acceptance Criteria**:

- [ ] Seed is consumed from inventory
- [ ] Plot status changes to 'planted'
- [ ] Planting timestamp is recorded
- [ ] Growth timer starts
- [ ] Visual feedback shows planting success

**Technical Requirements**:

- Inventory management
- Plot state update
- Timer system integration
- Visual feedback

---

## Task 2: Quantum Blueberry Crop Implementation

**Epic**: Implement the starter crop with 5-minute growth cycle

### Subtask 2.1: Define Crop Data Structure

**Effort**: Small (1-2 hours)
**Dependencies**: None

**Description**: Define the data structure for crops

**Acceptance Criteria**:

- [x] CropState interface defined
- [x] Crop stores type, planting time, growth time
- [x] Crop stores watering status and bonus
- [x] Crop can be harvested

**Technical Requirements**:

```typescript
interface CropState {
	id: string;
	type: string;
	plantedAt: number;
	growthTime: number;
	watered: boolean;
	waterBonus: number;
}
```

---

### Subtask 2.2: Create Crop Catalog

**Effort**: Small (2-4 hours)
**Dependencies**: Subtask 2.1

**Description**: Create JSON catalog for Quantum Blueberry

**Acceptance Criteria**:

- [x] Quantum Blueberry defined in JSON
- [x] Growth time set to 5 minutes
- [x] Buy price set to 5 credits
- [x] Sell price set to 8 credits
- [x] Yield defined as 1-2 berries

**Implementation Notes**:

- [x] Created `src/data/crops.json` with flexible array-based JSON format
- [x] Updated `src/data/crops.ts` to load from JSON array
- [x] JSON data matches specification exactly
- [x] Flexible Design: Array format makes it easy to add new crops
- [x] Extended with 3 crops: Quantum Blueberries, Stellar Strawberries, Cosmic Carrots
- [x] Different growth times: 5min, 10min, 15min for variety
- [x] Economic progression: Higher investment, higher returns
- [x] Data-Driven Visuals: Crop appearance defined in JSON, no hardcoded if statements
- [x] Visual Attributes: seed_color, harvest_color, harvest_shape, harvest_position
- [x] Extensible System: Easy to add new crop types and visual styles
- [x] Simplified MVP Visuals: Growing dot from 3px to 40px using harvest color
- [x] Sub-Minute Support: Fractional minutes (0.5 = 30 seconds) for fast testing
- [x] Smart Time Display: Shows seconds (< 1min) or minutes (â‰¥ 1min)

**Technical Requirements**:

```json
[
	{
		"id": "crop.quantum_blueberry",
		"display_name": "Quantum Blueberries",
		"growth_minutes": 5,
		"buy_price": 5,
		"sell_price_raw": 8,
		"yield": { "min": 1, "max": 2 }
	}
]
```

---

### Subtask 2.3: Implement Growth Timer System

**Effort**: Medium (4-8 hours)
**Dependencies**: Subtask 2.2

**Description**: Implement timer system for crop growth

**Acceptance Criteria**:

- [x] Timer starts when crop is planted
- [x] Timer counts down from 5 minutes
- [x] Timer persists when game is closed
- [x] Timer calculates offline progress
- [x] Crop becomes ready when timer expires

**Technical Requirements**:

- Timer calculation logic
- Offline progress calculation
- State persistence
- Timer resolution system

---

### Subtask 2.4: Create Crop Visual States

**Effort**: Medium (4-8 hours)
**Dependencies**: Subtask 2.3

**Description**: Create visual representations for crop growth stages

**Acceptance Criteria**:

- [x] 4 visual stages: seed, sprout, growing, ready
- [x] Visual changes based on growth progress
- [x] Smooth transitions between stages
- [x] Visual feedback for ready state

**Technical Requirements**:

- Sprite management
- Growth stage calculation
- Visual state transitions
- Ready state indication

---

## Task 3: Basic Harvest and Profit System

**Epic**: Implement the satisfying harvest experience

### Subtask 3.1: Implement Harvest Logic

**Effort**: Small (2-4 hours)
**Dependencies**: Subtask 2.4

**Description**: Implement the harvest action

**Acceptance Criteria**:

- [x] Harvest action only works on ready crops
- [x] Harvest removes crop from plot
- [x] Harvest adds berries to inventory
- [x] Harvest gives credits (8 per berry)
- [x] Harvest gives XP (2 per harvest)

**Technical Requirements**:

- Harvest validation
- Inventory management
- Credit system
- XP system

**Implementation Notes**:

- âœ… **Inventory System**: Added `inventory` field to PlayerState
- âœ… **Harvest Logic**: Items added to inventory, credits earned, XP gained
- âœ… **UI Updates**: Inventory count displayed in player stats
- âœ… **Visual Feedback**: Flash effect on harvest with alpha animation

---

### Subtask 3.2: Create Harvest Visual Feedback

**Effort**: Small (2-4 hours)
**Dependencies**: Subtask 3.1

**Description**: Create satisfying visual feedback for harvest

**Acceptance Criteria**:

- [x] Harvest shows particle effects
- [x] Harvest shows credit gain animation
- [x] Harvest shows XP gain animation
- [x] Harvest has satisfying sound effect
- [x] Visual feedback is immediate

**Technical Requirements**:

- Particle system
- Animation system
- Audio system
- Visual feedback timing

**Implementation Notes**:

- âœ… **Flash Effect**: Simple alpha animation for immediate visual feedback
- âœ… **Console Feedback**: Harvest details logged to console
- âœ… **UI Updates**: Credits, XP, and inventory updated immediately
- âœ… **Smooth Animation**: 150ms flash effect for satisfying feedback

---

## Task 4: Basic Market Interface

**Epic**: Create a simple market where players can buy seeds

### Subtask 4.1: Create Market UI Layout

**Effort**: Medium (4-8 hours)
**Dependencies**: None

**Description**: Create the basic market interface layout

**Acceptance Criteria**:

- [ ] Market screen accessible from main game
- [ ] Market shows available seeds
- [ ] Market shows seed prices
- [ ] Market shows player credits
- [ ] Market has buy button

**Technical Requirements**:

- UI layout system
- Market screen component
- Credit display
- Button components

---

### Subtask 4.2: Implement Purchase Logic

**Effort**: Small (2-4 hours)
**Dependencies**: Subtask 4.1

**Description**: Implement the seed purchase functionality

**Acceptance Criteria**:

- [ ] Purchase validates player has enough credits
- [ ] Purchase deducts credits from player
- [ ] Purchase adds seed to inventory
- [ ] Purchase shows confirmation feedback
- [ ] Purchase handles insufficient funds

**Technical Requirements**:

- Credit validation
- Transaction logic
- Inventory management
- Error handling

---

## Task 5: Save and Load System

**Epic**: Implement reliable game state persistence

### Subtask 5.1: Set Up IndexedDB

**Effort**: Medium (4-8 hours)
**Dependencies**: None

**Description**: Set up IndexedDB for game state persistence

**Acceptance Criteria**:

- [ ] IndexedDB database created
- [ ] Game state can be saved
- [ ] Game state can be loaded
- [ ] Save/load handles errors gracefully
- [ ] Save/load is asynchronous

**Technical Requirements**:

- IndexedDB setup
- Async save/load operations
- Error handling
- Data serialization

---

### Subtask 5.2: Implement Auto-Save

**Effort**: Small (2-4 hours)
**Dependencies**: Subtask 5.1

**Description**: Implement automatic saving of game state

**Acceptance Criteria**:

- [ ] Game state saves automatically every 30 seconds
- [ ] Game state saves on important actions
- [ ] Auto-save doesn't interrupt gameplay
- [ ] Auto-save handles errors gracefully
- [ ] Auto-save is efficient

**Technical Requirements**:

- Auto-save timer
- Action-triggered saves
- Error handling
- Performance optimization

---

## Task 6: Dev Tools Console Interface

**Epic**: Create an in-game debugging interface

### Subtask 6.1: Create Dev Tools UI

**Effort**: Medium (4-8 hours)
**Dependencies**: None

**Description**: Create the dev tools console interface

**Acceptance Criteria**:

- [ ] Dev tools accessible via keyboard shortcut (F12)
- [ ] Console-style interface with command input
- [ ] Command history and autocomplete
- [ ] Toggle visibility on/off
- [ ] Mobile-friendly interface

**Technical Requirements**:

- Console UI component
- Keyboard input handling
- Command history
- Toggle system

---

### Subtask 6.2: Implement Resource Commands

**Effort**: Small (2-4 hours)
**Dependencies**: Subtask 6.1

**Description**: Implement commands to manipulate resources

**Acceptance Criteria**:

- [ ] `add_credits(amount)` command works
- [ ] `add_seeds(crop_id, quantity)` command works
- [ ] `remove_credits(amount)` command works
- [ ] `reset_resources()` command works
- [ ] Commands provide feedback

**Technical Requirements**:

- Command parsing
- Resource manipulation
- Feedback system
- Input validation

---

### Subtask 6.3: Implement Time Commands

**Effort**: Medium (4-8 hours)
**Dependencies**: Subtask 6.2

**Description**: Implement commands to manipulate time

**Acceptance Criteria**:

- [ ] `speed_up_growth(multiplier)` command works
- [ ] `skip_to_harvest()` command works
- [ ] `pause_timers()` command works
- [ ] `reset_timers()` command works
- [ ] Timer changes are visible immediately

**Technical Requirements**:

- Timer manipulation
- Growth speed multipliers
- Timer pause/resume
- Visual updates

---

## Summary

### Total Tasks: 6 Epics

### Total Subtasks: 18 Actionable Items

### Estimated Effort: 2-3 weeks

### Effort Distribution:

- **Small Tasks (2-4 hours)**: 10 tasks
- **Medium Tasks (4-8 hours)**: 8 tasks
- **Large Tasks (8+ hours)**: 0 tasks

### Dependencies:

- **No Dependencies**: 6 tasks
- **Single Dependency**: 8 tasks
- **Multiple Dependencies**: 4 tasks
